<!DOCTYPE html>
<html>
<head>
    <title>Manual Ark Test</title>
    <script src="src/js/ark-sdk-bundle.js"></script>
</head>
<body>
    <h1>Manual Ark SDK Test</h1>
    <button onclick="testSDK()">Test SDK</button>
    <pre id="output"></pre>
    
    <script>
        async function testSDK() {
            const output = document.getElementById('output');
            
            try {
                output.textContent = 'Testing SDK...\n';
                
                // Check if SDK is loaded
                if (typeof window.ArkSDK === 'undefined') {
                    output.textContent += 'ERROR: SDK not loaded!\n';
                    return;
                }
                
                output.textContent += 'SDK loaded successfully!\n';
                output.textContent += 'Available functions: ' + Object.keys(window.ArkSDK).join(', ') + '\n\n';
                
                // Test data
                const userPubkeyHex = '123958369d3740a6cd7da98877bb6d4bdb00199aad81b7915de663bec2c617a2';
                const serverUrl = 'https://mutinynet.arkade.sh';
                
                output.textContent += 'Testing address generation...\n';
                output.textContent += 'User pubkey: ' + userPubkeyHex + '\n';
                output.textContent += 'Server URL: ' + serverUrl + '\n\n';
                
                // Generate address
                const result = await window.ArkSDK.generateArkProtocolAddress(
                    userPubkeyHex,
                    serverUrl,
                    'testnet'
                );
                
                output.textContent += 'Result:\n';
                output.textContent += JSON.stringify(result, null, 2) + '\n\n';
                
                // Expected
                const expectedAddress = 'tark1qra883hysahlkt0ujcwhv0x2n278849c3m7t3a08l7fdc40f4f2nm8e5wfwmqqrm6yt30d2quacr9t3svg4qk6q7a5jewvp7yjep0z2gtpj3fd';
                output.textContent += 'Expected address:\n' + expectedAddress + '\n\n';
                output.textContent += 'Match: ' + (result.address === expectedAddress ? '✅ SUCCESS!' : '❌ FAILED');
                
            } catch (error) {
                output.textContent += 'ERROR: ' + error.message + '\n';
                console.error(error);
            }
        }
        
        // Auto-test on load
        window.onload = function() {
            setTimeout(testSDK, 1000);
        };
    </script>
</body>
</html>